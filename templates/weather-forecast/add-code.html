{% extends "base.html" %}
{% block content %}

<div class="bg-white pb-4 rounded ">

    <div class="col-md-9 col-lg-12 px-md-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 ">
          <h1 class="h2">Add Weather Forecast Code</h1>
        </div>
      </div>

      {% if added %}
      <div class="alert alert-success" role="alert">
         Weather Code  added successfully
      </div>
      {% endif %}

      {% comment %} form {% endcomment %}
<div class="col-md-12 px-md-4 shadow-lg p-3 mb-5 bg-body-tertiary rounded">
      
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" onclick="radion_one()" value="option1" checked>
    <label class="form-check-label" for="inlineRadio1">Add Mannuly</label>
  </div>
  <div class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" onclick="radion_two()" value="option2">
    <label class="form-check-label" for="inlineRadio2">Insert CSV</label>
  </div>

  <form method="post" id="form1">
  {% csrf_token %}

  <div class="row my-4">
    <div class="col">
        <label for="axis" class="form-label">Forecast title</label>
        <input type="text" name="forecast" class="form-control border border-secondary-subtle" id="axis" value='{{ form.forecast.value|default_if_none:"" }}' required>
        <div id="firstHelp" class="form-text text-danger">{{form.forecast.errors}}</div>
      </div>
    
      <div class="col">
        <label for="code" class="form-label">Code</label>
        <input type="number" name="code" class="form-control border border-secondary-subtle"  id="code" value='{{ form.code.value|default_if_none:"" }}' required>
        <div id="firstHelp" class="form-text text-danger">{{form.code.errors}}</div>
      </div>
  </div>

  <div class="row my-4">
    <div class="col">
        <label for="aor" class="form-label">Relation in char</label>
        <input type="text" name="relation_in_char" class="form-control border border-secondary-subtle" id="aor" value='{{ form.relation_in_char.value|default_if_none:"" }}'  required>
        <div class="form-text text-danger">{{form.relation_in_char.errors}}</div>
      </div>
    
      <div class="col">
        <label for="intensity" class="form-label">Intensity</label>
        <input type="text" class="form-control border border-secondary-subtle" name="intensity" id="intensity" value="{{form.intensity.value|default_if_none:''}}" required>
        <div class="form-text text-danger">{{form.intensity.errors.as_text}}</div>
      </div>
  </div>


  <div class="row my-4">
    <div class="col">
        <label for="area" class="form-label">Area (optional)</label>
        <input type="text" name="area" class="form-control border border-secondary-subtle" id="area" value='{{ form.area.value|default_if_none:"" }}'>
        <div class="form-text text-danger">{{form.area.errors}}</div>
      </div>
    
      <div class="col">
        <label for="legend" class="form-label">Legend</label>
        <input type="text" class="form-control border border-secondary-subtle" name="legend" id="legend" value="{{form.legend.value|default_if_none:''}}" required>
        <div class="form-text text-danger">{{form.legend.errors.as_text}}</div>
      </div>
  </div>


  <div class="row my-4">
    <div class="col-5">
        <button type="submit" class="btn btn-purple w-25">Add</button>
        <button type="reset" class="btn btn-info w-25 text-white ms-1">Reset</button>
    </div>
</div>
</form>


<form method="post"   id="form2" class="d-none p-5" action="/weather/code-csv-upload/" enctype="multipart/form-data">

  {% if invalid_csv %}
  <div class="alert alert-danger" role="alert">
    Invalid CSV format please check !
  </div>
  {% endif %}
  {% csrf_token %}
   <div class="containerr">
    <input type="file" class="form-control" name="file" id="file"  accept=".csv" required >
</div>

  <div class="row my-4">
    <div class="col-5">
        <button type="submit" class="btn btn-purple w-25" >Send</button>
        <a href="/media/samplefile/weather_code.csv" class="btn btn-info w-50 text-white ms-1" download>Download Format <i class="bi bi-arrow-down-circle-fill"></i></a>
    </div>
</div>
</form>
</div>

</div>

<script>

    function radion_one(){
      document.getElementById("form2").classList.add('d-none')
      document.getElementById("form1").classList.remove('d-none')
  }
  
  
  function radion_two(){
      document.getElementById("form1").classList.add('d-none')
      document.getElementById("form2").classList.remove('d-none')
  
  }
  
  {% if insert_csv %}
  radion_two()
  document.getElementById("inlineRadio1").setAttribute('checked', false )
  document.getElementById("inlineRadio2").setAttribute('checked', true )
  {% endif %}
  </script>
{% endblock %}