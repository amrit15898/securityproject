{% extends "base.html" %}
{% block content %}

<div class="bg-white pb-4 rounded ">

<div class="col-md-9 col-lg-12 px-md-4">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 ">
      <h1 class="h2">Add New Station</h1>
    </div>
  </div>


{% if added %}
<div class="alert alert-success" role="alert">
    Station added successfully
  </div>
{% endif %}

<form method="post">
    {% csrf_token %}
    <div class="col-md-12 px-md-4 shadow-lg p-3 mb-5 bg-body-tertiary rounded">
        <h5 class="text-bold">Station detail</h5>
    
     
        <div class="row my-4">
            <div class="col">
                <label for="axis" class="form-label">Station Name: </label>
                <input type="text" name="station_name" class="form-control border border-secondary-subtle" id="axis" value='{{ form.station_name.value|default_if_none:"" }}'  required>
                <div id="firstHelp" class="form-text text-danger">{{form.station_name.errors}}</div>
              </div>
            
              <div class="col">
                <label for="axis-code" class="form-label">Station Id: </label>
                <input type="text" name="station_id" class="form-control border border-secondary-subtle" value='{{ form.station_id.value|default_if_none:"" }}' id="axis-code"  required>
                <div id="firstHelp" class="form-text text-danger">{{form.station_id.errors}}</div>
              </div>
          </div>
    
    
          <!--  -->
          <div class="row my-4">
            <div class="col">
                <label for="axis" class="form-label">Latitude: </label>
                <input type="text" name="latitude" class="form-control border border-secondary-subtle" id="axis" value='{{ form.latitude.value|default_if_none:"" }}' required>
                <div id="firstHelp" class="form-text text-danger">{{form.latitude.errors.as_text}}</div>
              </div>
            
              <div class="col">
                <label for="axis-code" class="form-label">Longitude :</label>
                <input type="text" name="longitude" class="form-control border border-secondary-subtle" id="axis-code" value='{{ form.longitude.value|default_if_none:"" }}' required>
                <div id="firstHelp" class="form-text text-danger">{{form.longitude.errors.as_text}}</div>
              </div>
          </div>
          <!--  -->
          <div class="row my-4">
            <div class="col-6">
                <label for="axis" class="form-label">Terminal Id: </label>
                <input type="text" name="terminal_id" class="form-control border border-secondary-subtle" id="axis" value='{{ form.terminal_id.value|default_if_none:"" }}' required>
                <div id="firstHelp" class="form-text text-danger">{{form.terminal_id.errors}}</div>
              </div>
        
          </div>
    
    </div>

    <!-- form1 -->
    {% for i in range_form %}
    

    <div class="col-md-12 px-md-4 shadow-lg p-3 mb-5 bg-body-tertiary rounded">
      <div class="form-check station-check">
        {% if forloop.counter|slugify|length == 1 %}  
        
        <input class="form-check-input" type="checkbox" value="S0{{ forloop.counter }}" name="check" id="flexCheckDefault">
        <label class="form-check-label" for="flexCheckDefault" style="margin-top: 1px;">S0{{ forloop.counter }} </label>
        {% else %}

        <input class="form-check-input" type="checkbox" value="S{{ forloop.counter }}" name="check" id="flexCheckDefault">
        <label class="form-check-label" for="flexCheckDefault" style="margin-top: 1px;">S{{ forloop.counter }} </label>

        {% endif %}


          
        </div>

      <div style="margin-left: 80px;">
          <div class="row mb-4">
              <div class="col">
                  <label for="axis" class="form-label">Sensor Name: </label>
                  {% with name=forloop.counter0 %}
                  {{name|slugify }}
                  <input type="text" name="sensor_name" id="s01-name"  class="form-control border border-secondary-subtle" value='{{sensor_name.name|slugify  }}' >
                  {% endwith %}
                </div>
              
                <div class="col">
                  <label for="axis-code" class="form-label">Unit:</label>
                  <input type="text" name="unit" class="form-control border border-secondary-subtle" id="s01-unit">
                </div>
            </div>
  
  
            <div class="row my-4">
              <div class="col-6">
                  <label for="axis" class="form-label">Equation: </label>
                  <select name="equation" class="form-select  border border-secondary-subtle" id="s01-equation">
                    <option value="">----------</option>
                    {% for i in equation %}
                    <option value="{{i.equation}}">{{i.equation}}</option>
                    {% endfor %}
                  </select>
                </div>
            </div>
      </div>
  </div>
{% endfor %}
   



<!-- button -->
<div class="col-md-12  d-flex justify-content-center">
   <button class="btn btn-purple">Add Station</button>
</div>

</form>

</div>
<script>

  $('input:checkbox').change(
    function(){
        if ($(this).is(':checked')) {
            $("#"+this.value+"-unit").attr('required', true);
            $("#"+this.value+"-equation").attr('required', true);
            $("#"+this.value+"-name").attr('required', true);
        }
        else{
          $("#"+this.value+"-unit").attr('required', false);
          $("#"+this.value+"-equation").attr('required', false);
          $("#"+this.value+"-name").attr('required', false);
        }
    });

</script>
{% endblock %}